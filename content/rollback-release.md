---
title   : 배포와 롤백 강의
date    : 2023-08-08 10:38:35 +0900
updated : 2023-08-08 18:07:25 +0900
tags     : 
- 우테코
- 레벨3
---

## 무중단 배포

서비스를 다운시키지 않고 배포하는 것. 요즘 큰 회사들은 서비스 점검 공지를 보이지 않는다.

## 인프라 변경

JPA DDL auto 설정 또는 flyway 를 이용하여 운영 DB의 스키마를 관리하고 있지는 않은가?
- `spring.jpa.hibernate.ddl-auto: update`
- `spring.flyway.enbaled:true`
=> 운영 환경에서는 거의 사용하지 않는다. 운영 환경에서는 alter 권한이 없는 사용자를 사용한다. 

## 롤백

롤백이란 배포한 서비스를 이전 상태 (버전) 으로 돌리는 것

### 롤백과 문제 상황

코드를 배포할 때 스키마 변경을 했다면 롤백은 어떻게 하지?
프론트엔드와 백엔드 중 무엇을 먼저 롤백할 것인가?
배포한 뒤 문제가 생겨 핫픽스를 했는데, 롤백해야 하느나 상황이 되면 어떻게 하지?
롤백을 하려고 했는데 실패한다면?

운영 환경과 개발 환경은 다를 수 있다.
- 인프라 구성
- 데이터의 양

