---
title   : 레벨2 5주차
date    : 2023-05-16 10:48:34 +0900
updated : 2023-05-16 10:48:42 +0900
tags     : 
- 우테코
- 레벨2
---
# 5/16

## 피드백

### DTO는 어디에?
- DTO는 어느 레이어에 속하게 하는 게 좋을까? -> 나는 서비스라고 생각한다. 우르와 페어할 때 DTO가 컨트롤러 레이어에 두게 되면 하위 계층인 서비스에서 상위 계층인 DTO를 참조하게 되는 역류 참조가 발생하므로 서비스에 사용하는 것이 좋다고 생각한다. 이 의견은 DTO가 서비스에서 사용된다는 가정하에 있는 것이기는 하다. 만약 서비스에서 사용하는 DTO가 따로 있다면 기존 DTO는 컨트롤러 레이어, 서비스로 값이 전달될 때 사용하는 DTO를 서비스 레이어에 둘 것 같다. 

### 단위 테스트 중복?
- 레이어별로 만들어놓은 단위 테스트가 같은 기능을 검증하고 있는 것 같다. 컨트롤러 테스트에서 세부적인 비즈니스 규칙을 모두 검증할 필요가 있을까? 
-> 검증하고자 하는 대상이 무엇인지에 집중한다.

컨트롤러의 역할은 요청을 받고 응답을 하는 것이다. 
비즈니스 규칙의 일부는 검증될 수 있을지언정 컨트롤러의 역할을 검증하는 것이 목표가 되어야 한다. 즉, 컨트롤러 테스트에서는 비즈니스 규칙을 테스트할 필요는 없다고 생각한다.

**테스트 피라미드**
![[test_pyramid.jpg]]

### 테스트에서만 사용되는 프로덕션 코드?

테스트만을 위한 프로덕션 코드는 지양하되, 과하게 사용하는 것이 아니라면 제한적으로 허용하자.

Ex. 적절한 생성자가 없는 경우 테스트를 위한 생성자를 추가하는 방법

but, 테스트를 짜기 쉬운 코드를 만드는 것에 좀 더 집중하자.

## Spring JDBC with Datasource

### Datasource
연결 설정, 쿼리 실행, 트랜잭션 관리에 필요한 메서드들을 인터페이스로 제공하는 틀
애플리케이션과 기본 데이터베이스 사이의 브리지 역할을 한다.

### Datasource로 설정할 수 있는 것들
- url
- driver class
- user name & password
- connection pool 설정

### Profile
선택적으로 Spring Context를 구성하고, 선택적으로 활성화할 수 있다.
다양한 배포 시나리오에 따라서 변경할 수 있다.

`@Profile` 로 설정할 수 있다.

application-prod.properties와 application-test.propterties 중에 누가 우선순위가 높을까?