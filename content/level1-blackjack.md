---
title   : 블랙잭 미션
date    : 2023-03-02 00:01:45 +0900
updated : 2023-03-02 00:31:59 +0900
tags     : 
- 레벨1
- 우테코
---
## 페어
- 페어는 헤나였다.
- 헤나와 처음 만나고 나서 약 40분간 아이스 브레이킹 시간을 가졌다.

### 페어와 정한 규칙
- 20분마다 교대했다.
- 모르는 것은 바로바로 물어본다.
- 페어가 멍 때리면 괜찮냐고 물어본다.
- 페어가 마음 상할까 봐 하고 싶은 말을 숨기지 않는다.

### 페어와 프로그래밍 할 때 규칙
- 요구사항 분석 후에 클래스 간의 관계를 그림으로 그리면서 구현했다.
- 테스트 코드 메서드 이름을 카멜 케이스로 작성했다. ```throwExceptionWhenCardDuplicated()```, ```create()```
- 에러 메시지는 매직 스트링을 사용했다.
- 클래스와 클래스 필드 사이에 띄어쓰기 하지 않는다.
- 테스트 코드 클래스 선언 아래에 띄어쓰기 하지 않는다.
- TDD 할 때 실패하는 테스트 -> 테스트 실행 -> 돌아가도록 최소한 구현 -> 테스트 실행 후 성공 확인 -> 성공하는 테스트 -> 테스트 실행 -> 돌아가도록 구현 ... 방식으로 구현한다. 실패하는 테스트가 없는 경우 작성하지 않는다.
- Co-authored 사용했다.
- 도메인을 먼저 구현하기 시작했다.
- 커밋 규칙: test -> feat

## 미션에서 고민한 주제들
### 참가자의 점수를 계산하는 클래스는 어디여야 하는가?
1. ParticipantCards: 참가자의 카드 리스트를 가지고 있고, 점수를 계산할 때 카드 리스트를 갖고 있으면 계산하기 쉽다.
2. CardNumber(최종 채택): 다른 카드들의 합에 따라서 에이스의 값이 변경되어야 하므로, 카드 숫자의 값을 저장하고 있는 enum인 CardNumber에서 값을 계산해야 한다. 대신 계산하는 메서드의 매개변수는 List<CardNumber>로 받는다. (List<Card>를 받게 되면 다른 클래스와의 의존성이 커질 것 같다)
3. Optimizer(가칭): 점수를 계산하는 외부 객체를 만든다. ParticipantCards의 계산 메서드에서 Optimizer를 매개변수로 넣어 보낸다.

- 결국 CardNumber를 채택했다. 

### 딜러의 권한은 어디까지인가? (얼마나 현실세계와 가깝게 구현해야 할까?)
- 카드를 나눠주는 것도 딜러의 권한인가?
- 점수를 계산하는 권한을 딜러에게 줄까 고민했지만 헤나가 너무 현실세계와 비슷하게 구현한다고 해서 기각했다.

### 에이스의 값을 어떻게 가변적으로 설정할까?
- 에이스의 값은 1, 11이 될 수 있다. 21이 넘지 않으면서 가깝게 만드는 것이 최선이지만, 21을 넘은 경우 값이 최대한 작아져야 한다.
- CardNumber에서 계산하기로 했는데, 매개변수로 값을 받은 모든 카드 숫자를 더하고, 에이스의 개수만큼 10씩 더해가는 방식을 취했다. 대신 21이 넘지 않도록 더한다. 코드를 보는게 이해가 빠를 듯하다. 
- [코드](https:/github.com/hyena0608/java-blackjack/blob/hyena0608/src/main/java/blackjack/domain/CardNumber.java) stream과 reduce를 사용했다. 헤나 덕분에 reduce도 사용해보고 좋았다.

