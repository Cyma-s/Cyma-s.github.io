---
title: 2. 애플리케이션 계층
date: 2023-11-27 20:51:58 +0900
updated: 2023-11-29 14:19:11 +0900
tags:
  - 컴퓨터-네트워킹-하향식-접근
---

## 네트워크 애플리케이션의 원리

네트워크 애플리케이션 개발의 중심은 다른 위치의 종단 시스템에서 동작하고 네트워크를 통해 서로 통신하는 프로그램을 작성하는 것이다.  

여러분이 새로운 애플리케이션을 개발할 때는 여러 종단 시스템에서 실행되는 소프트웨어를 작성해야 한다. 중요한 것은 우리가 라우터나 링크 계층 스위치처럼 네트워크 코어 장비에서 실행되는 소프트웨어까지 작성할 필요는 없다는 점이다. 

이와 같이 종단 시스템에만 애플리케이션 소프트웨어가 존재한다는 기본 설계 방식은 인터넷 애플리케이션들이 빠르고 널리 발전하는 원동력이 되었다. 

### 네트워크 애플리케이션 구조

애플리케이션 구조는 네트워크 구조와 분명히 다르다. **애플리케이션 구조**는 애플리케이션 개발자가 설계하며, 또한 애플리케이션이 다양한 종단 시스템에서 어떻게 조직되어야 하는지를 알려준다. 
애플리케이션 구조를 선택할 때 애플리케이션 개발자는 현대 네트워크 애플리케이션에서 사용되는 두 가지 잘 알려진 구조 중 하나로 선택할 수 있다.

**클라이언트-서버 구조**에서 항상 동작하고 있는 호스트를 *서버*라고 부르는데, 서버와의 서비스는 *클라이언트*라는 다른 호스트들로부터 서비스 요청을 보낸다 . 
클라이언트-서버 구조에서 클라이언트는 서로 직접적으로 통신하지 않는다. 또한 클라이언트-서버 구조에서는 서버가 고정 IP 주소라는 잘 알려진 주소를 갖는다는 것이다. 서버는 항상 동작하고 있으므로 클라이언트는 서버 주소로 패킷을 보내서 언제든지 서버에 연결할 수 있다. 

때로는 클라이언트-서버 애플리케이션에서 하나의 서버 호스트가 자신의 클라이언트로부터 오는 모든 요청에 다 응답하는 것은 불가능하다. 이러한 이유로 많은 수의 호스트를 갖춘 **데이터 센터**가 강력한 가상의 서버를 생성하는 역할로 사용된다. 

**P2P 구조**에서는 항상 켜져 있는 인프라스트럭처 서버에 최소로 의존하거나 전혀 의존하지 않는다. 대신에 애플리케이션은 *피어*라는 간헐적으로 연결된 호스트 쌍이 서로 직접 통신하게 한다. 피어는 서비스 제공자가 소유하지 않고, 사용자들이 제어하는 데스크탑과 랩탑이다.  
특정 서버를 통하지 않고 피어가 통신하므로, 해당 구조를 peer-to-peer 라고 한다.  
P2P 구조는 자가 확장성이라는 특성을 갖는다. 또한 P2P 구조는 일반적으로 상당한 서버 인프라스트럭처와 서버 대역폭을 요구하지 않기 때문에 비용 효율적이다.  
그러나 고도의 분산 구조 특성으로 인해 보안, 성능, 신뢰성 면에서 도전을 맞이하고 있다. 

### 프로세스 간 통신

운영체제 용어에서 실제 통신하는 것은 프로그램이 아니라 **프로세스**다. 프로세스는 종단 시스템에서 실행되는 프로그램이다.  
통신 프로세스가 같은 종단 시스템에서 실행될 때 그들은 서로 프로세스 간에 통신한다.   

2개의 종단 시스템에서 프로세스는 컴퓨터 네트워크를 통한 **메시지** 교환으로 서로 통신한다.  
송신 프로세스는 메시지를 만들어서 네트워크로 보낸다. 수신 프로세스는 메시지를 받고 역으로 메시지를 보냄으로써 응답한다.

#### 클라이언트와 서버 프로세스

네트워크 애플리케이션은 네트워크에서 서로 메시지를 보내는 두 프로세스로 구성된다.  
통신하는 프로세스 각 쌍에 대해 일반적으로 클라이언트의 프로세스와 서버의 프로세스 중 하나로 이름을 짓는다.  

> 두 프로세스 간의 통신 세션에서 통신을 초기화(다른 프로세스와 세션을 시작하려고 접속을 초기화)하는 프로세스를 클라이언트라고 하고, 세션을 시작하기 위해 접속을 기다리는 프로세스를 서버라고 한다.

#### 프로세스와 컴퓨터 네트워크 사이의 인터페이스

대부분의 애플리케이션은 두 프로세스가 메시지를 서로에게 보내는 통신 프로세스 쌍으로 구성된다.  
하나의 프로세스로부터 다른 프로세스로 보내는 메시지는 네트워크를 통해 움직인다.  

프로세스는 **소켓**을 통해 네트워크로 메시지를 보내고 받는다.  
소켓은 호스트의 애플리케이션 계층과 트랜스포트 계층 간의 인터페이스다.  
또한 소켓은 네트워크 애플리케이션이 인터넷에 만든 프로그래밍 인터페이스이므로, 애플리케이션과 네트워크 사이의 API 라고도 한다.  

애플리케이션은 소켓의 애플리케이션 계층에 대한 모든 통제권을 갖지만, 소켓의 트랜스포트 계층에 대한 통제권은 거의 갖지 못한다.  
트랜스포트 계층에 대한 애플리케이션 개발자의 통제는 (1) 트랜스포트 프로토콜의 선택, (2) 최대 버퍼와 최대 세그먼트 크기 같은 약간의 트랜스포트 계층 매개변수의 설정뿐이다.  

#### 프로세스 주소 배정

한 호스트상에서 수행되고 있는 프로세스가 패킷을 다른 호스트에서 수행되고 있는 프로세스로 패킷을 보내기 위해서는 수신 프로세스가 주소를 갖고 있을 필요가 있다.  

수신 프로세스를 식별하기 위해서는 다음과 같은 두 가지 정보가 명시되어야 한다.
1. 호스트의 주소
2. 목적지 호스트 내의 수신 프로세스를 명시하는 식별자

인터넷에서 호스트는 IP 주소로 식별된다. IP 주소는 32비트로 구성되며, 호스트를 유일하게 식별한다.  
메시지가 전달되어야 하는 호스트의 주소를 아는 것과 더불어 송신 호스트는 수신 호스트에서 수행되고 있는 수신 프로세스도 식별해야 한다. 목적지 포트 번호는 일반적으로 한 호스트가 많은 네트워크 애플리케이션을 수행할 수 있기 때문에 사용된다.  

### 애플리케이션이 이용 가능한 트랜스포트 서비스

송신 측의 애플리케이션은 소켓을 통해 메시지를 보낸다. 소켓의 반대편에서 트랜스포트 프로토콜은 네트워크를 통해 그 메시지를 수신 프로세스의 소켓으로 이동시킬 책임이 있다. 

인터넷을 포함해서 많은 네트워크는 하나 이상의 트랜스포트 프로토콜을 제공한다. 애플리케이션을 개발할 때는 사용 가능한 트랜스포트 프로토콜 중에서 하나를 선택해야 한다.  

트랜스포트 계층 프로토콜은 넓은 범위에서 신뢰적 데이터 전송, 처리율, 시간, 보안이라는 네 가지 차원의 서비스를 제공할 수 있다. 

#### 신뢰적 데이터 전송

전자메일, 파일 전송, 원격 호스트 접속, 재무 애플리케이션 같은 애플리케이션의 경우 데이터의 손실이 위험한 결과를 초래할 수 있다. 이를 위해 트랜스포트 계층 프로토콜은 프로세스 간 **신뢰적 데이터 전송** 서비스를 제공할 수 있다.  
트랜스포트 프로토콜이 이 서비스를 제공할 때, 송신 프로세스는 데이터를 소켓으로 보내고, 그 데이터가 오류 없이 수신 프로세스에 도착할 것이라는 확신을 갖는다.   

트랜스포트 계층 프로토콜이 신뢰적 데이터 전송을 제공하지 않을 때, 송신 프로세스가 보낸 데이터는 수신 프로세스에 전혀 도착하지 않을 수 있다. 이는 **손실 허용 애플리케이션**의 경우, 즉, 어느 정도의 데이터 손실을 참아낼 수 있는 실시간 오디오/비디오 혹은 저장 오디오/비디오 같은 멀티미디어 애플리케이션에서는 받아들여질 수 있다. 

#### 처리율

처리율은 네트워크 경로를 따라 두 프로세스 간의 통신 세션에서 송신 프로세스가 수신 프로세스로 비트를 전달할 수 있는 비율을 나타낸다.  
다른 세션들이 네트워크 경로를 따라 대역폭을 공유하고, 이 세션들이 생겼다 없어졌다 하기 떄문에 가용한 처리율은 시간에 따라 변동한다.  

애플리케이션은 r비트/초 의 보장된 처리율을 요구할 수 있고, 트랜스포트 프로토콜은 가용한 처리율이 항상 적어도 r bps 임을 보장한다.  

처리율 요구 사항을 갖는 애플리케이션은 대역폭 민감 애플리케이션이라고 한다. 반면 탄력적 애플리케이션은 가용한 처리율을 많으면 많은 대로 적으면 적은 대로 이용할 수 있다. 전자메일, 파일 전송, 웹 전송이 융통성 있는 애플리케이션이다. 

#### 시간

트랜스포트 계층 프로토콜은 시간 보장을 제공할 수 있다.  
인터넷 전화, 가상 환경, 원격회의, 다자간 게임과 같은 실시간 상호작용 애플리케이션이 효과적으로 동작하기 위해서는 데이터 전송에 엄격한 시간 제한 조건이 요구된다.  

비실시간 애플리케이션의 경우 낮은 지연이 항상 높은 지연보다 선호되지만 종단 간 지연에 엄격한 제약을 받는 것은 아니다. 

#### 보안

트랜스포트 프로토콜은 애플리케이션에 하나 이상의 보안 서비스를 제공할 수 있다.  

송신 호스트에서 트랜스포트 프로토콜은 송신 프로세스가 전송하는 모든 데이터를 암호화할 수 있고, 수신 호스트에서 트랜스포트 프로토콜은 그 데이터를 수신 프로세스로 전달하기 전에 데이터의 암호를 해독할 수 있다.   
이러한 서비스는 데이터가 송신과 수신 프로세스 사이에서 어느 정도 관찰된다 하더라도 두 프로세스 사이에 기밀성을 제공한다. 그 외에도 데이터 무결성과 종단 인증 등을 포함할 수 있다. 

### 인터넷 전송 프로토콜이 제공하는 서비스

인터넷은 애플리케이션에게 2개의 전송 프로토콜, 즉 UDP (User Datagram Protocol) 와 TCP (Transmission Control Protocol) 을 제공한다.  

#### TCP 서비스

TCP 서비스 모델은 연결지향형 서비스와 신뢰적인 데이터 전송 서비스를 포함한다. 

- 연결지향형 서비스: 애플리케이션 계층 메시지를 전송하기 전에 TCP는 클라이언트와 서버가 서로 전송 제어 정보를 교환하게 한다. 이러한 핸드셰이킹 과정이 클라이언트와 서버에 패킷이 곧 도달할테니 준비하라고 알리는 역할을 한다. 핸드셰이킹 단계 후, **TCP 연결**이 두 프로세스의 소켓 사이에 존재한다고 말한다. 이 연결은 두 프로세스가 서로에게 동시에 메시지를 보낼 수 있기에 전이중 (full-duplex) 연결이라고 한다. 애플리케이션이 메시지 전송을 마치면 연결을 끊어야 한다.
- 신뢰적인 데이터 전송 서비스: 통신 프로세스는 모든 데이터를 오류 없이 올바른 순서로 전달하기 위해 TCP 에 의존한다. TCP 는 애플리케이션의 한 쪽이 바이트 스트림을 소켓으로 전달하면 그 바이트 스트림이 손실되거나 중복되지 않게 수신 소켓으로 전달한다. 

또한 TCP 는 혼잡 제어 방식, 즉 통신하는 프로세스의 직접 이득보다는 인터넷의 전체 성능 향상을 위한 서비스를 포함한다.

#### UDP 서비스

UDP 는 최소의 서비스 모델을 가진 가장 간단한 전송 프로토콜이다.  
UDP 는 비연결형이므로 두 프로세스가 통신을 하기 전에 핸드셰이킹을 하지 않는다.  
UDP 는 비신뢰적인 데이터 전송 서비스를 제공한다. 즉, 하나의 프로세스가 UDP 소켓으로 메시지를 보내면, UDP 는 그 메시지가 수신 소켓에 도착하는 것을 보장하지 않는다. 게다가 수신 소켓에 도착하는 메시지들의 순서가 뒤바뀔 수도 있다.  

UDP 는 혼잡 제어 방식을 포함하지 않는다. 따라서 UDP 의 송신 측은 데이터을 원하는 속도로 하위 계층(네트워크 계층)으로 보낼 수 있다.

#### 인터넷 트랜스포트 프로토콜이 제공하지 않는 서비스

TCP 는 신뢰적 종단 간 데이터 전송을 제공하며, 보안 서비스를 제공하기 위해 애플리케이션 계층에서 TLS 를 통해 쉽게 강화될 수 있다.  

그러나 TCP 와 UDP 에서 처리율 혹은 시간 보장에 대한 언급은 빠졌다.  
그렇지만 인터넷은 여러 해 동안 시간 민감 애플리케이션을 서비스해오고 있고, 그런 보장이 없는 경우에도 가능한 한 잘 대처할 수 있도록 설계되었기 때문에 상당히 잘 작동하고 있다. 그럼에도 불구하고 현명한 설계도 공중 인터넷에서 흔히 있는 경우처럼 지연이 과도할 때는 한계가 있다.  
즉, 오늘날의 인터넷은 때로 시간 민감 애플리케이션에게 만족스러운 서비스를 제공할 수는 있으나 시간 혹은 대역폭 보장을 제공할 수 없다.  

인터넷 전화 애플리케이션은 보통 패킷 손실을 허용하지만 효율성을 위해 최소의 전송률을 필요로 하기 때문에 인터넷 전화 애플리케이션 개발자들은 일반적으로 UDP 상에서 자신들의 애플리케이션을 수행하는 것을 선호하며, 그렇게 함으로써 TCP 의 혼잡 제어 방식과 패킷 오버헤드를 회피할 수 있다. 그러나 많은 방화벽이 UDP 트래픽을 차단하도록 설정되어 있기 때문에, 인터넷 전화 애플리케이션은 UDP 통신이 실패할 경우를 대비하여 TCP 를 사용하도록 설계되어 있다. 

### 애플리케이션 계층 프로토콜

**애플리케이션 계층 프로토콜**은 다른 종단 시스템에서 실행되는 애플리케이션의 프로세스가 서로 메시지를 보내는 방법을 정의한다.  

- 교환 메시지 타입 (ex. 요청 메시지와 응답 메시지)
- 여러 메시지 타입의 문법 (ex. 메시지 내부의 필드와 필드 간의 구별 방법)
- 필드의 의미, 즉 필드에 있는 정보의 의미
- 언제, 어떻게 프로세스가 메시지를 전송하고 메시지에 응답하는지 결정하는 규칙

여러 애플리케이션 계층 프로토콜은 RFC에 명시되어 있으므로 공중 도메인에서 찾을 수 있다. ex. HTTP  
다른 많은 애플리케이션 계층 프로토콜은 독점이며 (비개방적임) 공중 도메인에서 구할 수 없다. 

애플리케이션 계층 프로토콜은 네트워크 애플리케이션의 한 요소일 뿐이다. 

### 이 책에서 다루는 네트워크 애플리케이션

- 웹
- 전자메일
- 디렉터리 서비스, DNS
- P2P 애플리케이션, CDN

## 웹과 HTTP

